<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë‚šì‹œí„°ê°ë³„ê¸°</title>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 600px; margin: auto; }
    input[type=text] { width: 100%; padding: 10px; margin-top: 10px; }
    button { padding: 10px 20px; margin-top: 10px; }
    #result, #ai-result { margin-top: 15px; font-weight: bold; }
  </style>
</head>
<body>
  <h1>ğŸ£ ë‚šì‹œí„°ê°ë³„ê¸°</h1>
  <input id="url" type="text" placeholder="ì˜ˆ: login.naver.com">
  <button onclick="check()">ê°ë³„í•˜ê¸°</button>
  <div id="result"></div>
  <div id="ai-result"></div>

  <h3>ğŸš¨ ìˆ˜ìƒí•œ ë§í¬ë¥¼ ë°œê²¬í•˜ì…¨ë‚˜ìš”?</h3>
  <input id="report-url" type="text" placeholder="ì‹ ê³ í•  URL ì…ë ¥">
  <button onclick="report()">ì‹ ê³ í•˜ê¸°</button>

  <script>
    async function check() {
      const url = document.getElementById("url").value;
      const res = await fetch("/check?url=" + encodeURIComponent(url));
      const data = await res.json();
      document.getElementById("result").innerText = "ğŸ” ê²°ê³¼: " + data.result + " (ì‹ ê³  ìˆ˜: " + data.ì‹ ê³ ìˆ˜ + ")";

      // AI ë¶„ì„
      const ai = await fetch("/preview?url=" + encodeURIComponent(url));
      const aires = await ai.json();
      document.getElementById("ai-result").innerText = "ğŸ§  AI ë¶„ì„: " + aires.preview;
    }

    async function report() {
      const url = document.getElementById("report-url").value;
      const res = await fetch("/report", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ url })
      });
      const data = await res.json();
      alert(data.message);
    }
  </script>
</body>
</html>
